# 学習記録
日々学んだことの簡単な記録をまとめます。

### 今回の研修のゴール
```
EC2上の任意インスタンス上にdocker上でwebサーバ（nginx）が稼働し、ブラウザからアクセスすると動きのあるページが閲覧できる
- コンテナは決められたEC2インスタンスで稼働する
- あらかじめ決めたれた条件（ポート等）を満たしている
- 稼働した元となるコード（index.htmlやDockerファイル等）はGitHub上にアップロードされている
- README.mdがあり、そこには構築が記載され、環境が再現可能
```
## [環境構築](./01_build_development_environment.md) (2024/04/16)

### やったこと
#### 今回のゴール
- 以下が自身のmacにインストールされており利用できる状態であること
（可能な限りterminalを使ってインストールする）
  - homebrew
  - git
  - github desktop
  - githubのアカウントも作成（会社のメールアドレス）
  - docker desktop
  - docker
  - docker-compose
  - visual studio code
- git/githubの初期設定
  - 個人アカウントに任意のリポジトリを作成する
  - github desktopベースで作成したリポジトリをcloneする
  - 任意のマークダウンファイルをpushし、ファイルがgithubサイトで閲覧できる
  - 各種の作業は作業手順書としてまとめる
    - マークダウンで作成

#### 追加で工夫した点
- githubにssh接続できるように設定した

### 学んだこと・できること
- 環境構築
  - macのパッケージマネージャー(hoomebrew)により各種アプリケーションをインストール
- Git/GitHubの入口
  - Git で init / add / commit まで
  - GitHub でレポジトリの新規作成から、git remote と clone/push まで
  - Git/GitHubへのSSh接続
    - ssh-keygenによる公開鍵と秘密鍵の作成
    - ~/.ssh/configのSSH接続設定
    - GitHubへのSSH接続の設定
- マークダウン記法によるドキュメント作成
- リモートインスタンス環境へのアクセス
  - 与えられた秘密鍵を元にリモートインスタンス環境へのSSh接続
- ネットワーク通信を行う
  - sshでアクセス
    - 手順は研修ドキュメントの「共有テスト環境へのアクセス方法」を参照

#### 特に新しく学んだこと・発見したこと
- GitHubへのアクセス方法についてデスクトップを使ったGUIとコマンドラインのCUIの2種類でアクセスする方法を改めて整理できた（特にGUIの方は使ったことがあまりなかった）
- 公開鍵認証の方式について改めて仕組みを復習した
- マークダウン記法でどうすれば見やすくできるかを考えることができた

### 課題と疑問
#### 今後取り組みたいこと・自分で解決できる課題と疑問
- [ ] ~/.ssh/configの設定方法についてより詳しく理解する
- [ ] 学習したことのドキュメンテーションについて細かく記述し過ぎてしまっている
  - -> 適切な量でのドキュメンテーションと情報整理を心がける。

#### 質問したい課題・疑問
- [x] sshキー設定を行なっていないのになぜ自分はgithubレポジトリにpushできたのか
  - Github Desktop や VScode でgithub操作をするために認証をしたときに設定されたか？
  - -> MacのKeyChainに保存されたAccessTokenによって認証が自動で行われている。
    - GitHub認証ではhttpsのPassword認証は廃止され、AccessToken認証になっている。
      - 参考: [GitHub Docs | 個人用アクセス トークンを管理する](https://docs.github.com/ja/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens)
    - AccessTokenの利用方法はGitHubホームページのアカウントの設定からAccessTokenを発行して、端末にAccessTokenを設定する。AccessTokenは初回の`git push`の時にパスワードのように求められ、発行したAccessTokenを入力することで、`push`が可能となる。そして一旦`push`できるようになったらそのAccessTokenは端末上に保存される。例えば、MacではのKeyChainアプリが保持する。
      - 参考: [GitHub Docs | macOSキーチェーンからの認証情報を更新する](https://docs.github.com/ja/get-started/getting-started-with-git/updating-credentials-from-the-macos-keychain)
    - Github Desktopなどで認証するとAccessTokenが端末で設定されるのでその後ターミナルでもhttpsで接続可能になる。
      - [ ] MacのKeychainには確かにAccessTokenらしきものが登録されているが、GitHubのAccessToken欄に何も表示されないのはなぜ？

## [Linux操作とネットワーク](./02_linux_and_network.md) (2024/04/17)

### やったこと
#### 今回のゴール
- コマンドラインで作業（各ユーザでシェルコマンドを実行）
  - ディレクトリやファイルを作成しそれぞれに対し閲覧、編集、名前変更、移動、削除
    - ファイルはテキストファイルを想定しており、編集はvimコマンドを使うこと
  - 上記と同様の操作を他人のホームディレクトリ配下および/tmpディレクトリ配下でmk行う
    - 操作不可な場合は不可な理由を明確化、権限変更で対応できる場合は適切に変更し対応すること
  - ファイルおよびディレクトリ単位で圧縮、解凍ができること
- ネットワーク通信
  - ローカルとリモート（インスタンス）とのファイル送受信
  - 疎通確認コマンド（ping）インスタンス、他者のPC、yahoo等の公式サイトと通信確認ができる
  - 自分のローカルIPアドレスとグローバルIPアドレスを調べて説明できる

#### 追加で工夫した点
- 自身でSSHキーを作成し、そのSSHキーを元に接続できるようにした。
- ~/.ssh/configによりSSH設定を行うことで`ssh train`でインスタンスに接続できるようにした。
- 
### 学んだこと・できること
- Linuxのコマンドライン操作
  - 基本のコマンドライン操作: `cd`, `ls`, `pwd`, `mkdir`, `rm`, `rmdir`, `touch`, `cp`, `mv`
  - 権限変更: `chmod`, `chown`, `sudo`, `su`
  - ファイルの解凍・圧縮操作: `tar`, `zip`
  - ローカルからのファイルの転送・受信: `scp`
- ネットワーク
  - グローバルIPとローカルIPアドレスの違いと確認方法: `ifconfig`
  - pingコマンドによる通信確認: `ping`

#### 特に新しく学んだこと・発見したこと
- 権限変更について、ユーザ/ユーザグループ/その他の３つに対する権限の違いとread/write/execの権限種類の違いについて詳しく理解できた。
- ファイルの圧縮方法についてCUI操作は初めて行なった。またtarとzipの違いについても初めて知った。
- IPアドレスについてグローバルとローカルの違いをふわっとしていた理解がしっかりしたものになった。
- pingコマンドがどういうものかを理解できた。

### 課題と疑問
#### 今後取り組みたいこと・自分で解決できる課題と疑問
- [ ] `.ssh`の権限設定について適切な権限設定とその根拠を調べる
- [ ] `chmod`の4桁での指定方法について調べる
- [ ] シンボリックリンクについて原理と用途について調べる
- [ ] そもそも`ping`は何をしているのか通信プロトコル周りを含めて調べる

#### 質問したい課題・疑問
- [ ] `ifconfig`コマンドで出力されるネットワーク周りの情報について詳しく知りたい
- [ ] グローバルIPの確認方法は外部サイトにアクセスするしかないのか？他の方法はないのか？
- [ ] インスタンスへ`ping`が通らない理由は何か？
  - `ping`が通ると攻撃対象になる可能性があるため、通らないように設定しているのか？

## [Docker](./03_docker.md) (2024/04/18)
### やったこと
#### 今回のゴール
- Dockerとは何か、具体的なメリットや使い道を簡単に説明できるようになる。
- mac上でコンテナの基本操作を行う（Docker DesktopのGUIを使わずdockerコマンドを使うこと）
  - Ubuntu公式Dockerイメージを使ってコンテナを起動し、起動したコンテナ内部でディレクトリを確認したり、vimでファイルを作成したりする。
  - ホストOSで作ったファイルをコンテナ内で確認する。コンテナ内で作成したファイルをホストOSで確認する。
  - 生成されたコンテナの一覧を確認し、確認コマンドが表示する内容について理解する。
  - 起動中のコンテナを停止・再開してみる。
  - 不要になったコンテナを削除する。
  - 保存されているイメージを確認する。
- リモート（インスタンス）環境で同様のことを実行してみる。

#### 追加で工夫した点
- Dockerのオプションについて詳しく調査して理解した
  - Dockerの`-i`,`-t`,`-d`オプションと`bash`プロセスの終了条件について調査した
  - Dockerのデータ管理オプションについて調査した

### 学んだこと・できること
- Docker操作の基本
  - Dockerの概念理解
  - Dockerのイメージプルからコンテナの起動: `docker pull`, `docker run`, `docker stop`, `docker start`, `docker exec` 
  - Dockerのコンテナ・イメージ管理: `docker ps`, `docker ps -a`, `docker images`, `docker rm`, `docker rmi`
  - ホストマシンとコンテナ間のファイル操作: `docker cp`, `-v`オプション
  - インスタンス上でのDocker操作
- Dockerのオプションの理解
  - Dockerの`-i`,`-t`,`-d`オプションについて調査
  - Dockerのデータ管理オプションについて調査: `volume`, `mount`, `tmpfs`

#### 特に新しく学んだこと・発見したこと
- Dockerの基本操作と概念について改めて整理して理解し利用できるようになった。
- コンテナがフォアグラウンドプロセスで実行されていないと終了することと
- `-i`,`-t`,`-d`オプションについてその意味と用途を詳しく理解した
- `docker run`でコマンドを指定しなくても実行されるデフォルトのコマンドがあることを知った。
- コンテナでのデータ管理方法について、volume, mount, tmpfsそれぞれの違いと用途を詳しく理解できた。

### 課題と疑問
#### 今後取り組みたいこと・自分で解決できる課題と疑問
- [ ] Docker と VMの違いを内部構造から含めて詳しく説明できるように調べる。
- [x] DockerFileの記述方法などを詳しく知り、自分で作成できるようになる。

#### 質問したい課題・疑問
- [ ] bashは-iか-tのどちらかが割り当てらていないと終了するのはなぜか？
  - 入力先も出力先もなかったら自動でプロセスを終了する使用なのか？

## [Git/GitHub](./04_git_and_github.md) (2024/04/19)
### やったこと
#### 今回のゴール
Git/GitHubを使った複数人での開発の基本に慣れよう。(GitHub Desktop、コマンドいずれの操作かは問わない)
- Gitとは何か、GitHubとは何かを簡単に説明できるようになる。
- Gitのシンプルな使い方を理解する。
  - mac上で新規にリポジトリを作る。
  - 新規にファイルを作り、リポジトリにコミットする。
  - コミットされたことを確認する。
  - 一度コミットしたファイルにさらに変更を加え、コミットする。
  - コミットを修正したり、取り消したりしてみる。
- ブランチに慣れる（ローカルリポジトリ編）
  - 先に作ったリポジトリで新規にブランチを作成し、新規ブランチ上でファイルを変更してコミットする。
  - 新規ブランチに加えた変更を元のブランチにマージする。
  - 複数のブランチを作成し、既存のファイルにブランチごとに異なる変更を加えてみる。
    - ファイル編集後、コミット前に別のブランチに切り替えてみる。
    - 複数のブランチでコミット後、元のブランチに順次マージしてみる。
- ブランチに慣れる（GitHub編）
  - GitHub上にある他のメンバーのリポジトリをmac上にcloneした上で、新規にブランチを作成する。
  - 作成したブランチでファイルに変更を加えてコミットし、GitHubにpushする。
  - GitHub上でプルリクエストを作成して、pushしたブランチをmainブランチにマージするようリポジトリの所有者に依頼する。
  - 依頼を受けたリポジトリの所有者は、コミットされた内容を確認して、mainブランチにマージする。
  - マージしてもらったら、ローカルリポジトリを更新して、mainブランチの内容がマージ後の内容になっていることを確認する。

#### 追加で工夫した点
- gitのブランチ間での変更の持ち込みに関して詳しい調査・理解した
- `git reset`の`--hard`,`--mixed`,`--soft`オプションについて調査・理解した
- `git merge`でコンフリクトした時の取り消し方法について調査・理解した
- Git-flowとGitHub-flowについて調べて概念を理解した
- PRに対する"Approve" / "Request Changes" / "Comment"でのレビューや修正方法などを詳しく確認した

### 学んだこと・できること
TODO: コマンド詳しく
- Git/Githubについて理解する
- Gitの基本操作
  - git init / add / commit
  - git commitの修正と取り消し操作: `git reset`
- Gitのブランチ操作
  - ブランチの作成からマージまで
  - 変更の退避
  - コンフリクトの解消
- Githubの基本操作
  - レポジトリのForkからPull Requestまで
  - Pull Requestの承認
 
#### 特に新しく学んだこと・発見したこと
- ブランチ間でコミットしていない変更が持ち越されること・`git stash`の適切な利用方法を理解できた。
- git のコンフリクトの解消方法について正しく理解できた
- githubのFork機能について初めて利用した。
- githubのワークフローに沿ってPRを送るまでの流れについて理解できた
- githubのPR後の承認フローについて初めて行なった。また、それらを理解できた。

### 課題と疑問
#### 今後取り組みたいこと・自分で解決できる課題と疑問
- [ ] 実際の開発現場でのGit/GitHubの利用を体験してチーム開発のワークフローを身につけたい。
- [ ] コミットメッージやコミットの適切な粒度などの感覚を身につけたい。

#### 質問したい課題・疑問
- [ ] commitが求められるmergeと求められないmergeの差は何か？
  - 変更履歴が入子になるかならないか？

## [Web](./05_web_server.md) (2024/04/22)
### やったこと
#### 今回のゴール
Webサービスの基本のき、Webページが表示される仕組みを理解し、簡単なサービスインフラを作ってみよう。
ぶぶ
- Webページがブラウザに表示される仕組みについて、簡単に説明できるようになる。
- mac上で簡単なHTMLファイルを書いて、ブラウザで開いてみる。
- macにnginxを導入して起動し、ブラウザからアクセスして、上で書いたHTMLファイルが表示されるようにする。
- mac上のDockerでnginxコンテナを起動し、ブラウザからアクセスして上で書いたHTMLファイルが表示されるようにする。(nginx公式イメージを使って良い)
- 上記三つの構造の違いについて、手描きでよいので図を描いて簡単に説明できるようになる。

#### 追加で工夫した点
- Webサーバーにnginx公式Dockerイメージを使わず、ubuntu公式イメージを元にして同様の機能をもつイメージを作成した。
- 上記のイメージ作成を含めたWebサーバー用のDockerfileに記述した。

### 学んだこと・できること
- Webページがブラウザに表示される仕組みについての理解
- ファイルシステムへのアクセスによるブラウザでのHTML表示
- ローカルにNginxを立てた上でのLocalhostへのhttpアクセスによるブラウザでのHTML表示
- ローカルにDockerコンテナをたて、その上でNginxを立てた上でのLocalhostへのhttpアクセスによるブラウザでのHTML表示
- 上記3つの違いについて概念図を書いての理解

#### 特に新しく学んだこと・発見したこと
- Nginxを初めて利用して、Webサーバを起動することができた。
  - Nginxの構成の調べ方と設定の変更方法について理解した
- Dockerfileの書き方について理解して自分で記述しbuildできるようになった。
- Dockerコンテナとホストマシンのポート通信について整理して理解できた
- DockerのNginxコンテナとNginxのソフトウェアの概念を混同せずに理解できた。
- 通常のWebサーバが80番ポートをデフォルトで利用していることを初めて知った。
- 
### 課題と疑問
#### 今後取り組みたいこと・自分で解決できる課題と疑問
- [ ] Dockerコンテナのレイヤ構造とDcokerの仮想化技術について調査して理解する。

#### 質問したい課題・疑問
- [x] 起動しているnginxは`/usr/local/bin/nginx`だが、nginxの設定ファイル(`/usr/local/etc/nginx/nginx.conf`)やサーバーのルートディレクトリ(`/usr/local/Cellar/nginx/1.10.2_1/`)はどうやって確認すれば良いのか？
  - -> 正直OS・インストール方法によってパスが代ってきてしまうのでしょうがない。公式サイトを参照するのが良い。例えば[nginxの公式サイト](https://nginx.org/en/docs/)
  - -> OS・インストール方法によってどこにどういうファイルを保存するのかはある程度標準化されている。それを検索してどこにあるか当たりをつける。例えば[linuxディレクトリ構成](https://qiita.com/nys9302/items/a8ddeedd3cd9d0deb332)や[Homebrew公式サイト](https://formulae.brew.sh/formula/nginx#default)
- [ ] nginxの設定ファイル(`/usr/local/etc/nginx/nginx.conf`)のルートディレクトリは相対パス(`html`)を指定しているが、なぜ別のところ(`/usr/local/Cellar/nginx/1.10.2_1/`)からの相対パスなのか？

## [結合編](./06_deploy.md) (2024/04/25)
### やったこと
#### 今回のゴール
ここまでに学んだことを利用して、研修のゴールとなるシステムを組み上げる。以下を受入条件とする。
- 共有テスト環境のDocker上でWebサーバを稼働させること。使用するポート番号については、別途講師から指示する。
- BTI社内から当該Webサーバにアクセスすると、HTMLが返ってくること。
- Webサーバーにはnginxを使用すること。
- 稼働に必要なコードと、マークダウン形式で記述された構築手順がGitHubのリポジトリ上に置かれていること。
- 他のメンバーもそれらを使用して環境を再現できること。

#### 追加で工夫した点
- MarkdownファイルをHTMLファイルに変換し、リンクを使ったページ間の移動を実装した
- シェルスクリプトを使って、複数ステップある手順をまとめてみた。
- Reactにより静的Webページをbuildした

### 学んだこと・できること
- インスタンス上でDockerによるWebサーバー環境の構築
- IPアドレスとポート番号指定によるWebサーバーへのアクセス
- 構築手順の記述方法

#### 特に新しく学んだこと・発見したこと
- MarkdownファイルのHTML出力方法を知った。
- ReactのDockerによる環境構築方法を理解し、開発環境をDockerで管理する方法への理解が深まった
- 構築手順の記述方法とドキュメントの整理方法への理解が深まった。

### 課題と疑問
#### 今後取り組みたいこと・自分で解決できる課題と疑問
- [ ] Reactのチュートリアルを遂行し、簡単なWebページを作成する
- [ ] Dockerの"node'イメージについてデフォルトでReactが入っているのか？
  - [ ] `yarn start`でサーバーが起動できる仕組みは何か？

#### 質問したい課題・疑問
- [ ] プロジェクトの改善変更ではなく、プロジェクトの派生版やB案のように並列比較的な変更の場合はGitのブランチ管理はどうやって行うのか
- [ ] NginxとReactを用いたプロジェクトの構成例やベストプラクティスは何か？
  - そもそもNginxは必要か？Nodeで十分か？